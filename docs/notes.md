테스트 코드  
개발자가 개발을하면 개발자는 테스트를 해야하는가 아닌가?  
만약 한다면 어디까지 테스트를 해야하는가?

강사님 : 테스트는 무조건 해야한다.  
어디까지? : 어디까지 할지는 팀의 협의가 필요한 부분임, API테스트(Controller, Swagger, Postman)는 1번은 해봐야한다.  

**테스트를 할 수 있는 방법**
1. 테스트코드를 작성하기 (1순위)  
2. postman으로 실제로 서버에 쏴보기  
3. swagger로 테스트 해보기 (1.5순위)  
4. curl로 테스트 해보기(리눅스, 터미널, 명령프롬프트 명령어)  
5. 인텔리제이 얼티밋 버전 - HTTP 클라이언트 지원  

**테스트의 범위**
1. 단위테스트 - 가장 작은 단위의 기능을 테스트하는 것(메소드, 클래스, 아키텍쳐의 어떤 레이어) - 의존성이 없을 때
2. 통합테스트 - 여러 단위를 다 모아서 테스트 하는 것 - 단점 : 느림
    스프링은 다 통합테스트임 - 스프링 빈 때문에
3. 인수테스트 - 실제 운영환경과 똑같은 환경에서 하는 시나리오 테스트 - QA, 느림

ProductService에 대해서 테스트를 진행하려고 함 -> SpringBootTest -> 목적에 맞지않는(필요없는) 빈들을 다 가져옴  

**테스트코드 원칙 5개 FIRST 원칙**  

F : Fast - 빠르게 실행되어야 한다.  
I : Independent, Isolated - 각각의 테스트가 독립적으로 실행되어야 한다.  
R : Repeatable - 하나의 테스트를 몇번이고 실행할 수 있어야 하며, 결과값이 같아야한다.  
S : Self-validating - 테스트가 스스로 검증할 수 있어야한다.  
T : Timely - 적절한 시점에 작성되어야 한다. (그냥 바로바로 테스트 코드 작성해라)  

통합테스트에서 좀 빠르게 하기위해 사용하는 방법 - Mocking(가짜 객체)  
서비스 레이어를 테스트할 때 repository를 모킹해서 테스트를 빠르게 함 - repository를 호출하면 이런 결과가 나올거다 라고 거짓말 하는 것  
mocking 방식을 비선호하는 이유 : 거짓말도 개발자가 하는거라서 실수가 나옴 - 나중에 실수를 찾기가 매우 힘듦  

**Isolated**  
테스트 {a(), b(), c()}  
테스트 {b(), a(), c()}  
테스트 {c(), a(), b()}  
순서를 보장하지 않기 때문에 영향이 없어야함  
순서를 정할수도 있지만 그 자체로 의존성을 가질 수 있음 - Isolated원칙을 지킬 수 없음   

**Self-validating**

유저 저장하는 테스트 -> 유저가 DB저장 -> 유저를 select해서 존재하는가? -> true면 통과, 아니면 실패  
S를 도와주는 java의 객체 : assertThat(Junit Core)  

도메인 테스트, 서비스 테스트, 리포지토리 테스트, 컨트롤러 테스트  
테스트코드는 연습 많이 해야됨  

맥 : 커맨드 쉬프트 T  